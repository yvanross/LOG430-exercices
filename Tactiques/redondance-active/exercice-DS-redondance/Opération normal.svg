<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="653px" preserveAspectRatio="none" style="width:1842px;height:653px;background:#FFFFFF;" version="1.1" viewBox="0 0 1842 653" width="1842px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="975" x="237.5" y="178.8594"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:1.5;" width="561" x="1101.5" y="488.1875"/><rect fill="none" height="81.3984" style="stroke:#000000;stroke-width:1.5;" width="735" x="1101.5" y="548.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="92" x2="92" y1="97.5938" y2="646.8516"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="323.5" x2="323.5" y1="97.5938" y2="646.8516"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="555.5" x2="555.5" y1="97.5938" y2="646.8516"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1156.5" x2="1156.5" y1="97.5938" y2="646.8516"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1560.5" x2="1560.5" y1="97.5938" y2="646.8516"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1744.5" x2="1744.5" y1="97.5938" y2="646.8516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168" x="5" y="77.9951">&lt;&lt;Système externe&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="54" y="94.292">Capteur x</text><ellipse cx="92" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M92,21.5 L92,48.5 M79,29.5 L105,29.5 M92,48.5 L79,63.5 M92,48.5 L105,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153" x="247.5" y="66.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="254.5" y="86.292">switch:ISommateur</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="203" x="454.5" y="66.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="189" x="461.5" y="86.292">sommateur[i]:ISommateur</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91" x="1111.5" y="66.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1118.5" y="86.292">vote:IVote</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="183" x="1469.5" y="66.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="169" x="1476.5" y="86.292">dataServer:IDataServer</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="164" x="1662.5" y="66.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="1669.5" y="86.292">monitor:IMonitorCtrl</text><path d="M97,112.5938 L97,137.5938 L238,137.5938 L238,122.5938 L228,112.5938 L97,112.5938 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M228,112.5938 L228,122.5938 L238,122.5938 L228,112.5938 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="103" y="129.6606">A quelle fréquence</text><polygon fill="#181818" points="312,159.8594,322,163.8594,312,167.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="92" x2="318" y1="163.8594" y2="163.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="99" y="158.7935">addValue(id:integer, value:float)</text><path d="M237.5,178.8594 L307.5,178.8594 L307.5,185.9922 L297.5,195.9922 L237.5,195.9922 L237.5,178.8594 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="975" x="237.5" y="178.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="252.5" y="191.9263">par</text><polygon fill="#181818" points="544,213.125,554,217.125,544,221.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="324" x2="550" y1="217.125" y2="217.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="331" y="212.0591">addValue(id:integer, value:float)</text><polygon fill="#181818" points="1145,242.2578,1155,246.2578,1145,250.2578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="556" x2="1151" y1="246.2578" y2="246.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="577" x="563" y="241.1919">updatedSommation(idSommateur:integer,shadow:boolean,idCapteur:integer, value:float)</text><path d="M1162,266.2578 L1162,291.2578 L1426,291.2578 L1426,276.2578 L1416,266.2578 L1162,266.2578 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1416,266.2578 L1416,276.2578 L1426,276.2578 L1416,266.2578 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="243" x="1168" y="283.3247">map[id] = [datetime,map[id] + value]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1157" x2="1199" y1="332.6563" y2="332.6563"/><line style="stroke:#181818;stroke-width:1.0;" x1="1199" x2="1199" y1="332.6563" y2="345.6563"/><line style="stroke:#181818;stroke-width:1.0;" x1="1158" x2="1199" y1="345.6563" y2="345.6563"/><polygon fill="#181818" points="1168,341.6563,1158,345.6563,1168,349.6563" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="1164" y="312.4575">sommatorStillInShadow =</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="342" x="1164" y="327.5903">updateData(id:integer,shadown:boolean, value:float)</text><path d="M1162,358.6563 L1162,383.6563 L1479,383.6563 L1479,368.6563 L1469,358.6563 L1162,358.6563 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1469,358.6563 L1469,368.6563 L1479,368.6563 L1469,358.6563 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="296" x="1168" y="375.7231">quel delta de datetime est acceptable &lt; 1ms?</text><path d="M1162,393.7891 L1162,433.7891 L1616,433.7891 L1616,403.7891 L1606,393.7891 L1162,393.7891 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1606,393.7891 L1606,403.7891 L1616,403.7891 L1606,393.7891 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="429" x="1168" y="410.856">Comment le IVote change l'état du sommateur pour shadow: false</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237" x="1172" y="425.9888">voir le return sommatorStillInShadow</text><line style="stroke:#181818;stroke-width:1.0;" x1="1157" x2="1199" y1="460.1875" y2="460.1875"/><line style="stroke:#181818;stroke-width:1.0;" x1="1199" x2="1199" y1="460.1875" y2="473.1875"/><line style="stroke:#181818;stroke-width:1.0;" x1="1158" x2="1199" y1="473.1875" y2="473.1875"/><polygon fill="#181818" points="1168,469.1875,1158,473.1875,1168,477.1875" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="390" x="1164" y="455.1216">[res,value,idSommateurInError] = canSendSommationData()</text><path d="M1101.5,488.1875 L1173.5,488.1875 L1173.5,495.3203 L1163.5,505.3203 L1101.5,505.3203 L1101.5,488.1875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:1.5;" width="561" x="1101.5" y="488.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="1116.5" y="501.2544">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="86" x="1188.5" y="500.3979">[res == true]</text><polygon fill="#181818" points="1549,522.4531,1559,526.4531,1549,530.4531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1157" x2="1555" y1="526.4531" y2="526.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="310" x="1164" y="521.3872">updateData(id:integer, name:string, value:float)</text><path d="M1101.5,548.4531 L1173.5,548.4531 L1173.5,555.5859 L1163.5,565.5859 L1101.5,565.5859 L1101.5,548.4531 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="81.3984" style="stroke:#000000;stroke-width:1.5;" width="735" x="1101.5" y="548.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="1116.5" y="561.52">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="201" x="1188.5" y="560.6636">[idSommateurInError  !=  null]</text><path d="M1162,570.5859 L1162,595.5859 L1309,595.5859 L1309,580.5859 L1299,570.5859 L1162,570.5859 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1299,570.5859 L1299,580.5859 L1309,580.5859 L1299,570.5859 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="1168" y="587.6528">voir diagramme 4.1</text><polygon fill="#181818" points="1732.5,617.8516,1742.5,621.8516,1732.5,625.8516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1157" x2="1738.5" y1="621.8516" y2="621.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="368" x="1164" y="616.7856">sommateurDefectueux(vote:IVote,idSommateur:integer)</text><!--MD5=[0e41239d54ac60f53f2751a4c16570de]
@startuml
skinparam style strictuml 
Actor "<<Système externe>>\nCapteur x" as C
participant "switch:ISommateur" as ISW
participant "sommateur[i]:ISommateur" as IS
participant "vote:IVote" as IV
participant "dataServer:IDataServer" as IDS
participant "monitor:IMonitorCtrl" as IMC

note right of C: A quelle fréquence
C -> ISW: addValue(id:integer, value:float)
par 
  ISW -> IS: addValue(id:integer, value:float)
  IS -> IV: updatedSommation(idSommateur:integer,shadow:boolean,idCapteur:integer, value:float)
end

note right of IV: map[id] = [datetime,map[id] + value]
IV -> IV: sommatorStillInShadow = \nupdateData(id:integer,shadown:boolean, value:float)

note right of IV: quel delta de datetime est acceptable < 1ms?
note right of IV: Comment le IVote change l'état du sommateur pour shadow: false \n voir le return sommatorStillInShadow
IV->IV: [res,value,idSommateurInError] = canSendSommationData()
opt  res == true
  IV -> IDS: updateData(id:integer, name:string, value:float)
end

opt  idSommateurInError  !=  null
  note right of IV: voir diagramme 4.1
  IV -> IMC: sommateurDefectueux(vote:IVote,idSommateur:integer)
end
@enduml

PlantUML version 1.2022.10beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>