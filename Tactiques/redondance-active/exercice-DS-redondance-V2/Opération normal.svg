<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="614px" preserveAspectRatio="none" style="width:1188px;height:614px;background:#FFFFFF;" version="1.1" viewBox="0 0 1188 614" width="1188px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="184.0625" style="stroke:#000000;stroke-width:1.5;" width="401" x="268.5" y="178.8594"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:1.5;" width="662" x="268.5" y="449.3203"/><rect fill="none" height="81.3984" style="stroke:#000000;stroke-width:1.5;" width="914" x="268.5" y="509.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="92" x2="92" y1="97.5938" y2="607.9844"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="323.5" x2="323.5" y1="97.5938" y2="607.9844"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="557.5" x2="557.5" y1="97.5938" y2="607.9844"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="794.5" x2="794.5" y1="97.5938" y2="607.9844"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1051.5" x2="1051.5" y1="97.5938" y2="607.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168" x="5" y="77.9951">&lt;&lt;Système externe&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="54" y="94.292">Capteur x</text><ellipse cx="92" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M92,21.5 L92,48.5 M79,29.5 L105,29.5 M92,48.5 L79,63.5 M92,48.5 L105,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91" x="278.5" y="66.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="285.5" y="86.292">vote:IVote</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="203" x="456.5" y="66.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="189" x="463.5" y="86.292">sommateur[i]:ISommateur</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="251" x="669.5" y="66.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="237" x="676.5" y="86.292">DataWebServer:IDataWebServer</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="242" x="930.5" y="66.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="228" x="937.5" y="86.292">orchestrator:IOrchestrateurCtrl</text><path d="M97,112.5938 L97,137.5938 L238,137.5938 L238,122.5938 L228,112.5938 L97,112.5938 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M228,112.5938 L228,122.5938 L238,122.5938 L228,112.5938 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="103" y="129.6606">A quelle fréquence</text><polygon fill="#181818" points="312,159.8594,322,163.8594,312,167.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="92" x2="318" y1="163.8594" y2="163.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="99" y="158.7935">addValue(id:integer, value:float)</text><path d="M268.5,178.8594 L338.5,178.8594 L338.5,185.9922 L328.5,195.9922 L268.5,195.9922 L268.5,178.8594 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="184.0625" style="stroke:#000000;stroke-width:1.5;" width="401" x="268.5" y="178.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="283.5" y="191.9263">par</text><polygon fill="#181818" points="335,273.6563,325,277.6563,335,281.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="329" x2="557" y1="277.6563" y2="277.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="341" y="212.0591">[id,value] = updatedSommation(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="341" y="227.1919">idSommateur:integer,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="341" y="242.3247">shadow:boolean,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="341" y="257.4575">idCapteur:integer,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="341" y="272.5903">value:float)</text><path d="M329,290.6563 L329,315.6563 L485,315.6563 L485,300.6563 L475,290.6563 L329,290.6563 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M475,290.6563 L475,300.6563 L485,300.6563 L475,290.6563 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="335" y="307.7231">wait 1 sec maximum</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="324" x2="366" y1="341.9219" y2="341.9219"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="366" x2="366" y1="341.9219" y2="354.9219"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="325" x2="366" y1="354.9219" y2="354.9219"/><polygon fill="#181818" points="335,350.9219,325,354.9219,335,358.9219" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="331" y="336.856">waitOrTimeout(length:int)</text><line style="stroke:#181818;stroke-width:1.0;" x1="324" x2="366" y1="421.3203" y2="421.3203"/><line style="stroke:#181818;stroke-width:1.0;" x1="366" x2="366" y1="421.3203" y2="434.3203"/><line style="stroke:#181818;stroke-width:1.0;" x1="325" x2="366" y1="434.3203" y2="434.3203"/><polygon fill="#181818" points="335,430.3203,325,434.3203,335,438.3203" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="331" y="385.9888">[value,idSommateurInError]=</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="331" y="401.1216">canSendSommationData(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="331" y="416.2544">id1,value1,id2,value2,id3,value3)</text><path d="M268.5,449.3203 L340.5,449.3203 L340.5,456.4531 L330.5,466.4531 L268.5,466.4531 L268.5,449.3203 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:1.5;" width="662" x="268.5" y="449.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="283.5" y="462.3872">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="92" x="355.5" y="461.5308">[value != null]</text><polygon fill="#181818" points="783,483.5859,793,487.5859,783,491.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="324" x2="789" y1="487.5859" y2="487.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="310" x="331" y="482.52">updateData(id:integer, name:string, value:float)</text><path d="M268.5,509.5859 L340.5,509.5859 L340.5,516.7188 L330.5,526.7188 L268.5,526.7188 L268.5,509.5859 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="81.3984" style="stroke:#000000;stroke-width:1.5;" width="914" x="268.5" y="509.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="283.5" y="522.6528">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="201" x="355.5" y="521.7964">[idSommateurInError  !=  null]</text><path d="M329,531.7188 L329,556.7188 L476,556.7188 L476,541.7188 L466,531.7188 L329,531.7188 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M466,531.7188 L466,541.7188 L476,541.7188 L466,531.7188 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="335" y="548.7856">voir diagramme 4.1</text><polygon fill="#181818" points="1039.5,578.9844,1049.5,582.9844,1039.5,586.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="324" x2="1045.5" y1="582.9844" y2="582.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="297" x="331" y="577.9185">sommateurDefectueux(idSommateur:integer)</text><!--MD5=[6dde4dcdc81694e656f647e3ac7da75c]
@startuml
skinparam style strictuml 
Actor "<<Système externe>>\nCapteur x" as C
participant "vote:IVote" as IV
participant "sommateur[i]:ISommateur" as IS
participant "DataWebServer:IDataWebServer" as IDS
participant "orchestrator:IOrchestrateurCtrl" as IOC


note right of C: A quelle fréquence
C -> IV: addValue(id:integer, value:float)
par 
  IS -> IV: [id,value] = updatedSommation(\nidSommateur:integer,\nshadow:boolean,\nidCapteur:integer, \nvalue:float)
  note right of IV: wait 1 sec maximum
  IV - -> IV: waitOrTimeout(length:int)  
end



' note right of IV: map[id] = [datetime,map[id] + value]
' IV -> IV: sommatorStillInShadow = \nupdateData(id:integer,shadown:boolean, value:float)

' note right of IV: quel delta de datetime est acceptable < 1ms?
' note right of IV: Comment le IVote change l'état du sommateur pour shadow: false \n voir le return sommatorStillInShadow
IV->IV: [value,idSommateurInError]=\ncanSendSommationData(\nid1,value1,id2,value2,id3,value3)
opt  value != null
  IV -> IDS: updateData(id:integer, name:string, value:float)
end

opt  idSommateurInError  !=  null
  note right of IV: voir diagramme 4.1
  IV -> IOC: sommateurDefectueux(idSommateur:integer)
end
@enduml

@startuml
skinparam style strictuml 
Actor "<<Système externe>>\nCapteur x" as C
participant "vote:IVote" as IV
participant "sommateur[i]:ISommateur" as IS
participant "DataWebServer:IDataWebServer" as IDS
participant "orchestrator:IOrchestrateurCtrl" as IOC


note right of C: A quelle fréquence
C -> IV: addValue(id:integer, value:float)
par 
  IS -> IV: [id,value] = updatedSommation(\nidSommateur:integer,\nshadow:boolean,\nidCapteur:integer, \nvalue:float)
  note right of IV: wait 1 sec maximum
  IV - -> IV: waitOrTimeout(length:int)  
end




IV->IV: [value,idSommateurInError]=\ncanSendSommationData(\nid1,value1,id2,value2,id3,value3)
opt  value != null
  IV -> IDS: updateData(id:integer, name:string, value:float)
end

opt  idSommateurInError  !=  null
  note right of IV: voir diagramme 4.1
  IV -> IOC: sommateurDefectueux(idSommateur:integer)
end
@enduml

PlantUML version 1.2022.10beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>